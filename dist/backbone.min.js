!function(a,b){"use strict";if(a.Backbone={previousBackbone:a.Backbone,modules:[],registerModule:function(a,b,c){void 0!==this.loadModule?this.loadModule(a,b,c):this.modules.push({moduleName:a,moduleDependencies:b,moduleImplementation:c})}},"function"==typeof define&&define.amd)define(["underscore","jquery","exports"],function(c,d){b(a,a.Backbone,c,d)});else if("undefined"!=typeof exports){var c=require("underscore");b(a,exports,c)}else b(a,a.Backbone,a._,a.jQuery||a.Zepto||a.ender||a.$)}(this,function(a,b,c,d){"use strict";var e=[],f=function(a){var b,c=a.length,d=[];for(b=0;c>b;b+=1)d.push(g(a[b]));return d},g=function(a){var c,d=b,e=a.split("."),f=e.length;for(("Backbone"===e[0]||"backbone"===e[0])&&(e=e.slice(1)),f=e.length,c=0;f>c;c++)void 0===d[e[c]]&&(d[e[c]]={}),d=d[e[c]];return d};return b.slice=e.slice,b.root=a,b._=c,b.VERSION="1.1.2",b.$=d,b.noConflict=function(){return a.Backbone=b.previousBackbone,this},b.emulateHTTP=!1,b.emulateJSON=!1,b.loadModule=function(a,d,e){var g,h,i=f(d),j=a.split("."),k=b;for(("Backbone"===j[0]||"backbone"===j[0])&&(j=j.slice(1)),h=j.length,g=0;h>g;g++)void 0===k[j[g]]&&(k[j[g]]={}),h-1>g&&(k=k[j[g]]),a=j[g];c.isEmpty(k[a])&&(k[a]=e.apply(this,i))},b.loadModules=function(){var a,c,d=b.modules,e=d.length;for(a=0;e>a;a+=1)c=d[a],b.loadModule(c.moduleName,c.moduleDependencies,c.moduleImplementation)},b.modules.length>0&&b.loadModules(),delete b.modules,b}),Backbone.registerModule("Backbone.extend",["_"],function(a){"use strict";return function(b,c){var d,e,f=this;return d=b&&a.has(b,"constructor")?b.constructor:function(){return f.apply(this,arguments)},a.extend(d,f,c),e=function(){this.constructor=d},e.prototype=f.prototype,d.prototype=new e,b&&a.extend(d.prototype,b),d.__super__=f.prototype,d}}),Backbone.registerModule("Backbone.urlError",[],function(){"use strict";return function(){throw new Error('A "url" property or function must be specified')}}),Backbone.registerModule("Backbone.wrapError",[],function(){"use strict";return function(a,b){var c=b.error;b.error=function(d){c&&c(a,d,b),a.trigger("error",a,d,b)}}}),Backbone.registerModule("Backbone.ajax",["Backbone"],function(a){"use strict";return function(){return a.$.ajax.apply(a.$,arguments)}}),Backbone.registerModule("Backbone.sync",["Backbone","_","Backbone.urlError"],function(a,b,c){"use strict";var d=!(void 0===window||!window.ActiveXObject||window.XMLHttpRequest&&(new XMLHttpRequest).dispatchEvent),e={create:"POST",update:"PUT",patch:"PATCH","delete":"DELETE",read:"GET"};return function(f,g,h){var i,j,k,l,m=e[f],n=h||{};return b.defaults(n,{emulateHTTP:a.emulateHTTP,emulateJSON:a.emulateJSON}),i={type:m,dataType:"json"},n.url||(i.url=b.result(g,"url")||c()),void 0!==n.data||!g||"create"!==f&&"update"!==f&&"patch"!==f||(i.contentType="application/json",i.data=JSON.stringify(n.attrs||g.toJSON(n))),n.emulateJSON&&(i.contentType="application/x-www-form-urlencoded",i.data=i.data?{model:i.data}:{}),!n.emulateHTTP||"PUT"!==m&&"DELETE"!==m&&"PATCH"!==m||(i.type="POST",n.emulateJSON&&(i.data._method=m),j=n.beforeSend,n.beforeSend=function(a){return a.setRequestHeader("X-HTTP-Method-Override",m),j?j.apply(this,arguments):void 0}),"GET"===i.type||n.emulateJSON||(i.processData=!1),"PATCH"===i.type&&d&&(i.xhr=function(){return new ActiveXObject("Microsoft.XMLHTTP")}),k=n.error,n.error=function(a,b,c){n.textStatus=b,n.errorThrown=c,k&&k.apply(this,arguments)},l=n.xhr=a.ajax(b.extend(i,n)),g.trigger("request",g,l,n),l}}),Backbone.registerModule("Backbone.Events",["Backbone","_","slice"],function(a,b,c){"use strict";var d=/\s+/,e=function(a,b,c,e){var f,g,h,i;if(!c)return!0;if("object"==typeof c){for(f in c)c.hasOwnProperty(f)&&a[b].apply(a,[f,c[f]].concat(e));return!1}if(d.test(c)){for(g=c.split(d),h=0,i=g.length;i>h;h+=1)a[b].apply(a,[g[h]].concat(e));return!1}return!0},f=function(a,b){var c,d=-1,e=a.length,f=b[0],g=b[1],h=b[2];switch(b.length){case 0:for(d+=1;e>d;)(c=a[d]).callback.call(c.ctx),d+=1;return;case 1:for(d+=1;e>d;)(c=a[d]).callback.call(c.ctx,f),d+=1;return;case 2:for(d+=1;e>d;)(c=a[d]).callback.call(c.ctx,f,g),d+=1;return;case 3:for(d+=1;e>d;)(c=a[d]).callback.call(c.ctx,f,g,h),d+=1;return;default:for(d+=1;e>d;)(c=a[d]).callback.apply(c.ctx,b),d+=1;return}},g={listenTo:"on",listenToOnce:"once"},h={on:function(a,b,c){if(!e(this,"on",a,[b,c])||!b)return this;this._events=this._events||{};var d;return d=this._events[a]?this._events[a]:this._events[a]=[],d.push({callback:b,context:c,ctx:c||this}),this},once:function(a,c,d){if(!e(this,"once",a,[c,d])||!c)return this;var f=this,g=b.once(function(){f.off(a,g),c.apply(this,arguments)});return g._callback=c,this.on(a,g,d)},off:function(a,c,d){if(!this._events||!e(this,"off",a,[c,d]))return this;if(!a&&!c&&!d)return this._events=void 0,this;var f,g,h,i,j,k,l,m=a?[a]:b.keys(this._events);for(f=0,g=m.length;g>f;f+=1)if(a=m[f],h=this._events[a])if(c||d){for(l=[],i=0,j=h.length;j>i;i+=1)k=h[i],(c&&c!==k.callback&&c!==k.callback._callback||d&&d!==k.context)&&l.push(k);l.length?this._events[a]=l:delete this._events[a]}else delete this._events[a];return this},trigger:function(a){if(!this._events)return this;var b,d,g=c.call(arguments,1);return e(this,"trigger",a,g)?(b=this._events[a],d=this._events.all,b&&f(b,g),d&&f(d,arguments),this):this},stopListening:function(a,c,d){var e,f,g=this._listeningTo;if(!g)return this;e=!c&&!d,d||"object"!=typeof c||(d=this),a&&((g={})[a._listenId]=a);for(f in g)g.hasOwnProperty(f)&&(a=g[f],a.off(c,d,this),(e||b.isEmpty(a._events))&&delete this._listeningTo[f]);return this}};return b.each(g,function(a,c){h[c]=function(c,d,e){var f,g;return f=this._listeningTo?this._listeningTo:this._listeningTo={},g=c._listenId?c._listenId:c._listenId=b.uniqueId("l"),f[g]=c,e||"object"!=typeof d||(e=this),c[a](d,e,this),this}}),h.bind=h.on,h.unbind=h.off,b.extend(a,h),h}),Backbone.registerModule("Backbone.Model",["Backbone","_","Backbone.Events","slice","Backbone.wrapError","Backbone.urlError","Backbone.extend"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,c){var d=a||{},e=c||{};this.cid=b.uniqueId("c"),this.attributes={},e.collection&&(this.collection=e.collection),e.parse&&(d=this.parse(d,e)||{}),d=b.defaults({},d,b.result(this,"defaults")),this.set(d,e),this.changed={},this.initialize.apply(this,arguments)},i=["keys","values","pairs","invert","pick","omit"];return b.extend(h.prototype,c,{changed:null,validationError:null,idAttribute:"id",generateId:function(a){return a[this.idAttribute]},initialize:function(){},toJSON:function(){return b.clone(this.attributes)},sync:function(){return a.sync.apply(this,arguments)},get:function(a){return this.attributes[a]},escape:function(a){return b.escape(this.get(a))},has:function(a){var b=this.get(a);return null!==b&&void 0!==b},set:function(a,c,d){var e,f,g,h,i,j,k,l,m,n,o;if(null===a||void 0===a)return this;if("object"==typeof a?(f=a,d=c):(f={})[a]=c,d=d||{},!this._validate(f,d))return!1;g=d.unset,i=d.silent,h=[],j=this._changing,this._changing=!0,j||(this._previousAttributes=b.clone(this.attributes),this.changed={}),l=this.attributes,k=this._previousAttributes;for(e in f)f.hasOwnProperty(e)&&(c=f[e],b.isEqual(l[e],c)||h.push(e),b.isEqual(k[e],c)?delete this.changed[e]:this.changed[e]=c,g?delete l[e]:l[e]=c);if(m=this.id,this.id=this.generateId(l),m!==this.id&&this.trigger("change-id",this,m,d),!i)for(h.length&&(this._pending=d),n=0,o=h.length;o>n;n+=1)this.trigger("change:"+h[n],this,l[h[n]],d);if(j)return this;if(!i)for(;this._pending;)d=this._pending,this._pending=!1,this.trigger("change",this,d);return this._pending=!1,this._changing=!1,this},unset:function(a,c){return this.set(a,void 0,b.extend({},c,{unset:!0}))},clear:function(a){var c,d={};for(c in this.attributes)this.attributes.hasOwnProperty(c)&&(d[c]=void 0);return this.set(d,b.extend({},a,{unset:!0}))},hasChanged:function(a){return null===a||void 0===a?!b.isEmpty(this.changed):b.has(this.changed,a)},changedAttributes:function(a){if(!a)return this.hasChanged()?b.clone(this.changed):!1;var c,d,e=!1,f=this._changing?this._previousAttributes:this.attributes;for(d in a)a.hasOwnProperty(d)&&b.isEqual(f[d],c=a[d])===!1&&(e=e||{},e[d]=c);return e},previous:function(a){return null!==a&&void 0!==a&&this._previousAttributes?this._previousAttributes[a]:null},previousAttributes:function(){return b.clone(this._previousAttributes)},fetch:function(a){a=a?b.clone(a):{},void 0===a.parse&&(a.parse=!0);var c=this,d=a.success;return a.success=function(b){return c.set(c.parse(b,a),a)?(d&&d(c,b,a),void c.trigger("sync",c,b,a)):!1},e(this,a),this.sync("read",this,a)},save:function(a,c,d){var f,g,h,i,j,k=this.attributes;if(null===a||void 0===a||"object"==typeof a?(f=a,d=c):(f={})[a]=c,d=b.extend({validate:!0},d),f&&!d.wait){if(!this.set(f,d))return!1}else if(!this._validate(f,d))return!1;return f&&d.wait&&(this.attributes=b.extend({},k,f)),void 0===d.parse&&(d.parse=!0),i=this,j=d.success,d.success=function(a){i.attributes=k;var c=i.parse(a,d);return d.wait&&(c=b.extend(f||{},c)),b.isObject(c)&&!i.set(c,d)?!1:(j&&j(i,a,d),void i.trigger("sync",i,a,d))},e(this,d),g=this.isNew()?"create":d.patch?"patch":"update","patch"===g&&(d.attrs=f),h=this.sync(g,this,d),f&&d.wait&&(this.attributes=k),h},destroy:function(a){a=a?b.clone(a):{};var c,d=this,f=a.success,g=function(){d.trigger("destroy",d,d.collection,a)};return a.success=function(b){(a.wait||d.isNew())&&g(),f&&f(d,b,a),d.isNew()||d.trigger("sync",d,b,a)},this.isNew()?(a.success(),!1):(e(this,a),c=this.sync("delete",this,a),a.wait||g(),c)},url:function(){var a=b.result(this,"urlRoot")||b.result(this.collection,"url")||f();return this.isNew()?a:a.replace(/([^\/])$/,"$1/")+encodeURIComponent(this.id)},parse:function(a){return a},clone:function(){return new this.constructor(this.attributes)},isNew:function(){return null===this.id||void 0===this.id},isValid:function(a){return this._validate({},b.extend(a||{},{validate:!0}))},_validate:function(a,c){if(!c.validate||!this.validate)return!0;a=b.extend({},this.attributes,a);var d=this.validationError=this.validate(a,c)||null;return d?(this.trigger("invalid",this,d,b.extend(c,{validationError:d})),!1):!0}}),b.each(i,function(a){b[a]&&(h.prototype[a]=function(){var c=d.call(arguments);return c.unshift(this.attributes),b[a].apply(b,c)})}),h.extend=g,h}),Backbone.registerModule("Backbone.Collection",["Backbone","_","Backbone.Events","Backbone.Model","slice","Backbone.wrapError","Backbone.extend"],function(a,b,c,d,e,f,g){"use strict";var h=function(a,c){var d=c||{};d.model&&(this.model=d.model),void 0!==d.comparator&&(this.comparator=d.comparator),this._reset(),this.initialize.apply(this,arguments),a&&this.reset(a,b.extend({silent:!0},d))},i={add:!0,remove:!0,merge:!0},j={add:!0,remove:!1},k=["forEach","each","map","collect","reduce","foldl","inject","reduceRight","foldr","find","detect","filter","select","reject","every","all","some","any","include","contains","invoke","max","min","toArray","size","first","head","take","initial","rest","tail","drop","last","without","difference","indexOf","shuffle","lastIndexOf","isEmpty","chain","sample","partition"],l=["groupBy","countBy","sortBy","indexBy"];return b.extend(h.prototype,c,{model:d,initialize:function(){},toJSON:function(a){return this.map(function(b){return b.toJSON(a)})},sync:function(){return a.sync.apply(this,arguments)},add:function(a,c){return this.set(a,b.extend({merge:!1},c,j))},remove:function(a,c){var d,e,f,g,h=!b.isArray(a);for(a=h?[a]:b.clone(a),c=c||{},d=0,e=a.length;e>d;d+=1)f=a[d]=this.get(a[d]),f&&(delete this._byId[f.id],delete this._byId[f.cid],g=this.indexOf(f),this.models.splice(g,1),this.length-=1,c.silent||(c.index=g,f.trigger("remove",f,this,c)),this._removeReference(f,c));return h?a[0]:a},set:function(a,c){c=b.defaults({},c,i);var e,f,g,h,j,k,l,m,n,o,p,q,r,s=c.at,t=[],u=[],v={},w=c.add,x=c.merge,y=c.remove;for(c.parse&&(a=this.parse(a,c)),e=!b.isArray(a),a=e?a?[a]:[]:a.slice(),l=this.comparator&&void 0===s&&c.sort!==!1,m=b.isString(this.comparator)?this.comparator:null,n=!l&&w&&y?[]:!1,o=this.model.prototype,p=0,q=a.length;q>p;p+=1)h=a[p]||{},f=this._isModel(h)?g=h:o.generateId?o.generateId(h):h[o.idAttribute||d.prototype.idAttribute],j=this.get(f),j?(y&&(v[j.cid]=!0),x&&(h=h===g?g.attributes:h,c.parse&&(h=j.parse(h,c)),j.set(h,c),l&&!k&&j.hasChanged(m)&&(k=!0)),a[p]=j):w&&(g=a[p]=this._prepareModel(h,c),g&&(t.push(g),this._addReference(g,c))),g=j||g,g&&(!n||!g.isNew()&&v[g.id]||n.push(g),v[g.id]=!0);if(y){for(p=0,q=this.length;q>p;p+=1)v[(g=this.models[p]).cid]||u.push(g);u.length&&this.remove(u,c)}if(t.length||n&&n.length)if(l&&(k=!0),this.length+=t.length,void 0!==s)for(p=0,q=t.length;q>p;p+=1)this.models.splice(s+p,0,t[p]);else for(n&&(this.models.length=0),r=n||t,p=0,q=r.length;q>p;p+=1)this.models.push(r[p]);if(k&&this.sort({silent:!0}),!c.silent){for(p=0,q=t.length;q>p;p+=1)(g=t[p]).trigger("add",g,this,c);(k||n&&n.length)&&this.trigger("sort",this,c)}return e?a[0]:a},reset:function(a,c){c=c||{};var d,e;for(d=0,e=this.models.length;e>d;d+=1)this._removeReference(this.models[d],c);return c.previousModels=this.models,this._reset(),a=this.add(a,b.extend({silent:!0},c)),c.silent||this.trigger("reset",this,c),a},push:function(a,c){return this.add(a,b.extend({at:this.length},c))},pop:function(a){var b=this.at(this.length-1);return this.remove(b,a),b},unshift:function(a,c){return this.add(a,b.extend({at:0},c))},shift:function(a){var b=this.at(0);return this.remove(b,a),b},slice:function(){return e.apply(this.models,arguments)},get:function(a){return null===a||void 0===a?void 0:this._byId[a]||this._byId[a.id]||this._byId[a.cid]},at:function(a){return this.models[a]},where:function(a,c){return b.isEmpty(a)?c?void 0:[]:this[c?"find":"filter"](function(b){var c;for(c in a)if(a.hasOwnProperty(c)&&a[c]!==b.get(c))return!1;return!0})},findWhere:function(a){return this.where(a,!0)},sort:function(a){if(!this.comparator)throw new Error("Cannot sort a set without a comparator");return a=a||{},b.isString(this.comparator)||1===this.comparator.length?this.models=this.sortBy(this.comparator,this):this.models.sort(b.bind(this.comparator,this)),a.silent||this.trigger("sort",this,a),this},pluck:function(a){return b.invoke(this.models,"get",a)},fetch:function(a){a=a?b.clone(a):{},void 0===a.parse&&(a.parse=!0);var c,d=a.success,e=this;return a.success=function(b){c=a.reset?"reset":"set",e[c](b,a),d&&d(e,b,a),e.trigger("sync",e,b,a)},f(this,a),this.sync("read",this,a)},create:function(a,c){if(c=c?b.clone(c):{},(a=this._prepareModel(a,c))===!1)return!1;c.wait||this.add(a,c);var d=this,e=c.success;return c.success=function(a,b){c.wait&&d.add(a,c),e&&e(a,b,c)},a.save(null,c),a},parse:function(a){return a},clone:function(){return new this.constructor(this.models,{model:this.model,comparator:this.comparator})},_reset:function(){this.length=0,this.models=[],this._byId={}},_prepareModel:function(a,c){if(this._isModel(a))return a.collection||(a.collection=this),a;c=c?b.clone(c):{},c.collection=this;var d=new this.model(a,c);return d.validationError?(this.trigger("invalid",this,d.validationError,c),!1):d},_isModel:function(a){return a instanceof d},_addReference:function(a){this._byId[a.cid]=a,null!==a.id&&void 0!==a.id&&(this._byId[a.id]=a),a.on("all",this._onModelEvent,this)},_removeReference:function(a){this===a.collection&&delete a.collection,a.off("all",this._onModelEvent,this)},_onModelEvent:function(a,b,c,d){("add"!==a&&"remove"!==a||c===this)&&("destroy"===a&&this.remove(b,d),"change-id"===a&&(null!==c&&void 0!==c&&delete this._byId[c],null!==b.id&&void 0!==b.id&&(this._byId[b.id]=b)),this.trigger.apply(this,arguments))}}),b.each(k,function(a){b[a]&&(h.prototype[a]=function(){var c=e.call(arguments);return c.unshift(this.models),b[a].apply(b,c)})}),b.each(l,function(a){b[a]&&(h.prototype[a]=function(c,d){var e=b.isFunction(c)?c:function(a){return a.get(c)};return b[a](this.models,e,d)})}),h.extend=g,h}),Backbone.registerModule("Backbone.Router",["Backbone","_","Backbone.Events"],function(a,b,c){"use strict";var d=/\((.*?)\)/g,e=/(\(\?)?:\w+/g,f=/\*\w+/g,g=/[\-{}\[\]+?.,\\\^$|#\s]/g,h=a.Router=function(a){var b=a||{};b.routes&&(this.routes=b.routes),this._bindRoutes(),this.initialize.apply(this,arguments)};return b.extend(h.prototype,c,{initialize:function(){},route:function(c,d,e){b.isRegExp(c)||(c=this._routeToRegExp(c)),b.isFunction(d)&&(e=d,d=""),e||(e=this[d]);var f=this;return a.history.route(c,function(b){var g=f._extractParameters(c,b);f.execute(e,g,d)!==!1&&(f.trigger.apply(f,["route:"+d].concat(g)),f.trigger("route",d,g),a.history.trigger("route",f,d,g))}),this},execute:function(a,b){a&&a.apply(this,b)},navigate:function(b,c){return a.history.navigate(b,c),this},_bindRoutes:function(){if(this.routes){this.routes=b.result(this,"routes");for(var a,c=b.keys(this.routes);void 0!==(a=c.pop());)this.route(a,this.routes[a])}},_routeToRegExp:function(a){return a=a.replace(g,"\\$&").replace(d,"(?:$1)?").replace(e,function(a,b){return b?a:"([^/?]+)"}).replace(f,"([^?]*?)"),new RegExp("^"+a+"(?:\\?([\\s\\S]*))?$")},_extractParameters:function(a,c){var d=a.exec(c).slice(1);return b.map(d,function(a,b){return b===d.length-1?a||null:a?decodeURIComponent(a):null})}}),h.extend=a.extend,h}),Backbone.registerModule("Backbone.History",["Backbone","_","Backbone.Events"],function(a,b,c){"use strict";var d=/^[#\/]|\s+$/g,e=/^\/+|\/+$/g,f=/#.*$/,g=function(){this.handlers=[],b.bindAll(this,"checkUrl"),void 0!==window&&(this.location=window.location,this.history=window.history)};return g.started=!1,b.extend(g.prototype,c,{interval:50,atRoot:function(){var a=this.location.pathname.replace(/[^\/]$/,"$&/");return a===this.root&&!this.location.search},getHash:function(a){var b=(a||this).location.href.match(/#(.*)$/);return b?b[1]:""},getPath:function(){var a=decodeURI(this.location.pathname+this.location.search),b=this.root.slice(0,-1);return 0===a.indexOf(b)&&(a=a.slice(b.length)),a.slice(1)},getFragment:function(a){return(null===a||void 0===a)&&(a=this._hasPushState||!this._wantsHashChange?this.getPath():this.getHash()),a.replace(d,"")},start:function(a){if(g.started)throw new Error("Backbone.history has already been started");g.started=!0,this.options=b.extend({root:"/"},this.options,a),this.root=this.options.root,this._wantsHashChange=this.options.hashChange!==!1,this._hasHashChange=void 0!==window.onhashchange,this._wantsPushState=!!this.options.pushState,this._hasPushState=!!(this.options.pushState&&this.history&&this.history.pushState),this.fragment=this.getFragment();var c,d,f=window.addEventListener||function(a,b){return attachEvent("on"+a,b)};if(this.root=("/"+this.root+"/").replace(e,"/"),this._hasHashChange||!this._wantsHashChange||this._wantsPushState&&this._hasPushState||(c=document.createElement("iframe"),c.src="",c.style.display="none",c.tabIndex=-1,d=document.body,this.iframe=d.insertBefore(c,d.firstChild).contentWindow,this.navigate(this.fragment)),this._hasPushState?f("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe?f("hashchange",this.checkUrl,!1):this._wantsHashChange&&(this._checkUrlInterval=setInterval(this.checkUrl,this.interval)),this._hasPushState&&this.atRoot())this.navigate(this.getHash(),{replace:!0});else if(this._wantsHashChange&&this._wantsPushState&&!this._hasPushState&&!this.atRoot())return this.location.replace(this.root+"#"+this.getPath()),!0;return void 0===this.options.silent?this.loadUrl():void 0},stop:function(){var a=window.removeEventListener||function(a,b){return detachEvent("on"+a,b)};this._hasPushState?a("popstate",this.checkUrl,!1):this._wantsHashChange&&this._hasHashChange&&!this.iframe&&a("hashchange",this.checkUrl,!1),this.iframe&&(document.body.removeChild(this.iframe.frameElement),this.iframe=null),this._checkUrlInterval&&clearInterval(this._checkUrlInterval),g.started=!1},route:function(a,b){this.handlers.unshift({route:a,callback:b})},checkUrl:function(){var a=this.getFragment();a===this.fragment&&this.iframe&&(a=this.getHash(this.iframe)),a!==this.fragment&&(this.iframe&&this.navigate(a),this.loadUrl())},loadUrl:function(a){return a=this.fragment=this.getFragment(a),b.any(this.handlers,function(b){return b.route.test(a)?(b.callback(a),!0):!1})},navigate:function(a,b){if(!g.started)return!1;b&&b!==!0||(b={trigger:!!b});var c=this.root+(a=this.getFragment(a||""));if(a=a.replace(f,""),this.fragment!==a){if(this.fragment=a,""===a&&"/"!==c&&(c=c.slice(0,-1)),this._hasPushState)this.history[b.replace?"replaceState":"pushState"]({},document.title,c);else{if(!this._wantsHashChange)return this.location.assign(c);this._updateHash(this.location,a,b.replace),this.iframe&&a!==this.getHash(this.iframe)&&(b.replace||this.iframe.document.open().close(),this._updateHash(this.iframe.location,a,b.replace))}return b.trigger?this.loadUrl(a):void 0}},_updateHash:function(a,b,c){if(c){var d=a.href.replace(/(javascript:|#).*$/,"");a.replace(d+"#"+b)}else a.hash="#"+b}}),a.history=new g,g.extend=a.extend,g}),Backbone.registerModule("Backbone.View",["Backbone","_","Backbone.Events"],function(a,b,c){"use strict";var d=["model","collection","el","id","attributes","className","tagName","events"],e=function(a){var c=a||{};this.cid=b.uniqueId("view"),b.extend(this,b.pick(c,d)),this._ensureElement(),this.initialize.apply(this,arguments)},f=/^(\S+)\s*(.*)$/;return b.extend(e.prototype,c,{tagName:"div",$:function(a){return this.$el.find(a)},initialize:function(){},render:function(){return this},remove:function(){return this._removeElement(),this.stopListening(),this},_removeElement:function(){this.$el.remove()},setElement:function(a){return this.undelegateEvents(),this._setElement(a),this.delegateEvents(),this},_setElement:function(b){this.$el=b instanceof a.$?b:a.$(b),this.el=this.$el[0]},delegateEvents:function(a){var c,d,e,g=a||b.result(this,"events");if(!g)return this;this.undelegateEvents();for(c in g)g.hasOwnProperty(c)&&(d=g[c],b.isFunction(d)||(d=this[g[c]]),d&&(e=c.match(f),this.delegate(e[1],e[2],b.bind(d,this))));return this},delegate:function(a,b,c){this.$el.on(a+".delegateEvents"+this.cid,b,c)},undelegateEvents:function(){return this.$el&&this.$el.off(".delegateEvents"+this.cid),this},undelegate:function(a,b,c){this.$el.off(a+".delegateEvents"+this.cid,b,c)},_createElement:function(a){return document.createElement(a)},_ensureElement:function(){if(this.el)this.setElement(b.result(this,"el"));else{var a=b.extend({},b.result(this,"attributes"));this.id&&(a.id=b.result(this,"id")),this.className&&(a["class"]=b.result(this,"className")),this.setElement(this._createElement(b.result(this,"tagName"))),this._setAttributes(a)}},_setAttributes:function(a){this.$el.attr(a)}}),e.extend=a.extend,e});